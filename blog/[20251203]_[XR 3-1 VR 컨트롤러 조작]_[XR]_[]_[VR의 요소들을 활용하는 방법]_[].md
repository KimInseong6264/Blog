# Ⅱ. VR 컨트롤러 조작



#### Starter Assets와 XR Interaction Toolkit 인스톨 된 상태를 가정

**하이어라키에 추가**
- XR Interaction Setup
- XR Device Simulator


## VR환경에서의 UI

#### VR에서는 Canvas를 Wold좌표로 수정해서 사용

![](https://velog.velcdn.com/images/iissk/post/5de674d4-9b3a-4a5d-82ad-cc6f6b14ae8e/image.png)
저 Tracked Device Graphic Raycaster가 붙어있어야 버튼이 눌릴 수 있음(캔버스에 달아야 함)

![](https://velog.velcdn.com/images/iissk/post/dc993011-699f-4bde-85f9-df7e33578866/image.png)
xr의 UI 이벤트 시스템을 사용해야 UI 버튼이 동작함


## Locomotion

### Turn

![](https://velog.velcdn.com/images/iissk/post/7d0849d4-763a-42c0-9150-ce75c214f209/image.png)
Turn Amount: 패드 휠로 턴하는 각도를 조절
Debounce Time: 꾹 눌렀을 때 움직이는 정도 조절

Enable Turn LeftRight: 회전 막을 때 씀

Enable Turn Around: 뒤보기 막을 때 씀. 180도 돌기 막을 때 체크 해제

![](https://velog.velcdn.com/images/iissk/post/7b8cefd2-a7b2-423f-ac32-61d63df687ba/image.png)
Right Controller에서도 Turn을 제어할 수는 있음 <br>
But. 스무스 모션 이네이블로도 턴을 제어할 수 있음(turn과 동시에 제어하면 문제 발생확률있음)

#### Move
![](https://velog.velcdn.com/images/iissk/post/41456cd0-3302-4793-9d59-b96a2b44ee1a/image.png)
- Enable Strafe는 옆으로 걷기를 조절
- Enable Fly는 하늘로도 걷기가 가능
- Use Gravity를 적용할 수 있음(이네이블 플라이 켜져있으면 안 먹힘)

### Teleportation

![](https://velog.velcdn.com/images/iissk/post/48178394-15a9-4a48-ba89-79b8795ed706/image.png)
- 텔레포트할 Plane에 Teleportation Area 달아주기
- Interaction Layer Mask를 텔레포트로 바꿔줘야 함

![](https://velog.velcdn.com/images/iissk/post/89625b6c-9574-458b-b36d-588442659c0d/image.png)

Teleportation Anchor : Teleport Anchor Transform에 넣은 지점으로 탤레포트함
- Interaction Layer Mask를 텔레포트로 바꿔줘야 함
- 텔레포트할 포인트를 Teleport Anchor Transform에 넣어줌

### 컨트롤러 세팅하기
![](https://velog.velcdn.com/images/iissk/post/d4c0f695-d918-450f-b8c6-97c256495210/image.png)
- Controller Visual로 들어가서 프리팹을 찾아서 가면 컨트롤러도 커스터마이징이 가능하다


### 그랩(시뮬레이터는 오른쪽 + G )

![](https://velog.velcdn.com/images/iissk/post/b4f91413-5068-4d5c-83e1-e2b11d4018dd/image.png)
- Select Mode에서 Multiple로 바꾸면 양 손을 써야만 물체를 들 수 있음
- Attach Transform: 원하는 위치를 넣어서 그 위치를 잡도록 할 수 있음
- Movement Type
	- 키네마틱 : 방망이처럼 다른 물체와 충돌 가능
    - 벨로시티 : 속도기반으로 동작하며 바닥을 뚫지 못하게 함
- Throw On Detach : 던지지 못하게 막는 기능(무브먼트 타입을 인스턴티로 해야 함)
- Track Position(Rotation) : 잡을 수는 있지만 움직이거나 회전을 하지 못하도록 막는 것
- Force Gravity On Detach : 처음엔 중력의 영향을 안 받다가, 그랩을 하면 중력의 영향을 받게 함(나무열매 같은 거에 사용)
- Use Dynamic Attach : 우리가 누르는 곳이 잡는 위치가 됨(평소보다 연산을 조금 더 하게 됨)
- Retain Transform Parent : 기본적으로 그랩하면 패런트에서 빠지는데, 이 기능이 설정되면 패런트로 다시 돌아감


![](https://velog.velcdn.com/images/iissk/post/c35efe82-93b4-4616-af2b-1e8b79832bf3/image.png)
- Interactable Events
	- Activate : 검지를 눌렀을 때, 동작하는 메서드를 등록
    - Hover : 가져다 대기만 하면 동작하는 메서드 등록
    - Select : 잡자마자 발동하는 것

    
    
    
    
### 소켓

![](https://velog.velcdn.com/images/iissk/post/5b438b7a-84a8-453a-8101-cbc0314f4ee4/image.png)
- 소켓을 끼워 넣을 수 있게 하는 오브젝트

![](https://velog.velcdn.com/images/iissk/post/4eab5b76-9ae5-4785-9a54-d089d4a1d3fd/image.png)
- 소켓 엑티브로 소켓 기능을 온오프 가능하다



